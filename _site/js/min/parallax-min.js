function fullscreenFix(){var a=$("body").height();$(".content-b").each(function(i){$(this).innerHeight()<=a&&$(this).closest(".fullscreen").addClass("not-overflow")})}function backgroundResize(){var a=curr_disp.height();$(".background").each(function(i){var s=$(this),t=s.width(),r=s.height(),e=s.attr("data-img-width"),o=s.attr("data-img-height"),c=e/o,n=parseFloat(s.attr("data-diff"));n=n?n:0;var d=0;if(s.hasClass("parallax")&&!$("html").hasClass("touch")){var l=r>a?r:a;d=a-r}o=r+d+n,e=o*c,t>e&&(e=t,o=e/c),s.data("resized-imgW",e),s.data("resized-imgH",o),s.css("background-size",e+"px "+o+"px")})}function parallaxPosition(a){var i=curr_disp.height(),s=curr_disp.scrollTop(),t=s+i,r=(s+t)/2,e=$(".parallax");e.each(function(a){var e=$(this),o=e.height(),c=e.offset().top,n=c+o;if(t>c&&n>s){var d=e.data("resized-imgW"),l=e.data("resized-imgH"),u=0,h=-l+i,p=i>o?l-o:l-i;c-=p,n+=p;var g=u+(h-u)*(r-c)/(n-c),f=e.attr("data-oriz-pos");f=f?f:"50%",$(this).css("background-position",f+" "+g+"px")}})}var curr_disp=$(window);"ontouchstart"in window&&(document.documentElement.className=document.documentElement.className+" touch"),$("html").hasClass("touch")||$(".parallax").css("background-attachment","fixed"),curr_disp.resize(fullscreenFix),fullscreenFix(),curr_disp.resize(backgroundResize),curr_disp.focus(backgroundResize),backgroundResize(),$("html").hasClass("touch")||(curr_disp.resize(parallaxPosition),curr_disp.scroll(parallaxPosition),parallaxPosition());